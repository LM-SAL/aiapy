image: python:3.7

before_script:
  - pip install tox

stages:
- Install
- Test
- Static

install:
  stage: Install
  script:
    - pip install .

py36-online:
  stage: Test
  image: python:3.6
  script:
    - tox -e py36-online

py37-online:
  stage: Test
  script:
    - tox -e py37-online
    - pip install coveralls PyYAML
    - coveralls --rcfile='aiapy/tests/coveragerc'

py38-online:
  stage: Test
  image: python:3.8
  script:
    - tox -e py38-online

py37-devdeps-online:
  allow_failure: true  # we want to know if there will be problems in the future
  stage: Test
  script:
    - tox -e py37-devdeps-online

py37:
  stage: Test
  script:
    - tox -e py37

build_docs:
  stage: Static
  script:
    - tox -e build_docs

codestyle:
  stage: Static
  script:
    - tox -e codestyle
